<?xml version="1.0" encoding="UTF-8"?>
<workflow-process id="1126999418470847" process-version="1" language-version="1.0" released="true" category="PC10" createdBy="admin" creationDate="20091002T131718"><name>WorkQueueAdministratorAndSubscribersNotification</name><process-display-name><localized-text><locale language="en">Work Queue Administrator And Subscribers Notification</locale></localized-text></process-display-name><description><localized-text><locale language="en">This process is used to send the notification to the administrator and  subscribers of the work queue when a task (no supervisor existing for the case submitted for approval) is assigned to the work queue.</locale></localized-text></description><enactment-mappings><mapping><source-attribute struct-name="curam.core.struct.CaseReference" name="caseReference"/><target-attribute wdo-name="CaseReferenceWDO" name="caseReference"/></mapping><mapping><source-attribute struct-name="curam.core.sl.struct.WorkQueueIDKey" name="workQueueID"/><target-attribute wdo-name="WorkQueueDetailsWDO" name="workQueueID"/></mapping><mapping><source-attribute struct-name="curam.core.sl.struct.WorkQueueName" name="workQueueName"/><target-attribute wdo-name="WorkQueueDetailsWDO" name="workQueueName"/></mapping></enactment-mappings><wdos><wdo is-list-wdo="false" initialize-attributes="false"><wdo-name>CaseReferenceWDO</wdo-name><display-name><localized-text><locale language="en">CaseReferenceWDO</locale></localized-text></display-name><description><localized-text><locale language="en">Workflow data object for case reference which is used to construct the message for notification.</locale></localized-text></description><attributes><attribute><attribute-name>caseReference</attribute-name><display-name><localized-text><locale language="en">Case Reference</locale></localized-text></display-name><type>STRING</type><required-at-enactment>true</required-at-enactment><process-output>false</process-output></attribute></attributes></wdo><wdo is-list-wdo="true" initialize-attributes="false"><wdo-name>UserListWDO</wdo-name><display-name><localized-text><locale language="en">UserListWDO</locale></localized-text></display-name><description><localized-text><locale language="en">List workflow data object used to store the names of subscribers and the administrator of the work queue.</locale></localized-text></description><attributes><attribute><attribute-name>userName</attribute-name><display-name><localized-text><locale language="en">User Name</locale></localized-text></display-name><type>STRING</type><required-at-enactment>false</required-at-enactment><process-output>false</process-output></attribute><attribute><attribute-name>userType</attribute-name><display-name><localized-text><locale language="en">User Type</locale></localized-text></display-name><type>STRING</type><required-at-enactment>false</required-at-enactment><process-output>false</process-output></attribute></attributes></wdo><wdo is-list-wdo="false" initialize-attributes="false"><wdo-name>WorkQueueDetailsWDO</wdo-name><display-name><localized-text><locale language="en">WorkQueueDetailsWDO</locale></localized-text></display-name><description><localized-text><locale language="en">Workflow data object for work queue ID and work queue name. Work queue ID is used to get the list of subscribers and the administrator of the work queue. Work queue name is used to construct the message for notification.</locale></localized-text></description><attributes><attribute><attribute-name>workQueueID</attribute-name><display-name><localized-text><locale language="en">workQueueID</locale></localized-text></display-name><type>INT64</type><required-at-enactment>true</required-at-enactment><process-output>false</process-output></attribute><attribute><attribute-name>workQueueName</attribute-name><display-name><localized-text><locale language="en">workQueueName</locale></localized-text></display-name><type>STRING</type><required-at-enactment>true</required-at-enactment><process-output>false</process-output></attribute></attributes></wdo></wdos><activities><start-process-activity id="1"><name><localized-text><locale language="en">Start Process Activity</locale></localized-text></name><description><localized-text><locale language="en">The start process activity</locale></localized-text></description><split type="none"><transition-id idref="6"/></split></start-process-activity><end-process-activity id="2"><name><localized-text><locale language="en">End Process Activity</locale></localized-text></name><description><localized-text><locale language="en">The end process activity</locale></localized-text></description><join type="none"/></end-process-activity><automatic-activity id="3"><name><localized-text><locale language="en">Read Work Queue Administrator And Subscribers</locale></localized-text></name><description><localized-text><locale language="en">Activity to get the list of subscribers and the administrator of the work queue.</locale></localized-text></description><join type="none"/><split type="none"><transition-id idref="2"/></split><bpo-mapping interface-name="curam.core.sl.intf.WorkQueue" method-name="readWorkQueueAdministratorAndSubscribers"><formal-parameters><formal-parameter index="0"><struct type="curam.core.sl.struct.WorkQueueIDKey"><field name="workQueueID"><base-type type="INT64"><wdo-attribute wdo-name="WorkQueueDetailsWDO" name="workQueueID"/></base-type></field></struct></formal-parameter></formal-parameters><return><struct><field name="dtls"><struct><field name="name"><base-type><wdo-attribute wdo-name="UserListWDO" name="userName"/></base-type></field></struct></field></struct></return></bpo-mapping></automatic-activity><route-activity id="6" category="AC1"><name><localized-text><locale language="en">Send Notification</locale></localized-text></name><description><localized-text><locale language="en">Activity to send the notification to the administrator and subscribers of the work queue.</locale></localized-text></description><notification delivery-mechanism="DM1"><subject><message><message-text><localized-text><locale language="en">A task has been assigned to the Work Queue %1s as no supervisor exists for the Case %2s</locale></localized-text></message-text><message-parameters><wdo-attribute wdo-name="WorkQueueDetailsWDO" name="workQueueName"/><wdo-attribute wdo-name="CaseReferenceWDO" name="caseReference"/></message-parameters></message></subject><body><message><message-text><localized-text><locale language="en">A task has been assigned to the Work Queue %1s as no supervisor exists for the Case %2s</locale></localized-text></message-text><message-parameters><wdo-attribute wdo-name="WorkQueueDetailsWDO" name="workQueueName"/><wdo-attribute wdo-name="CaseReferenceWDO" name="caseReference"/></message-parameters></message></body><allocation-strategy type="function" identifier="curam.core.sl.intf.NotificationAllocationFunction.defaultStrategy"><function-mappings><formal-parameters><formal-parameter index="0"><base-type type="STRING"><wdo-attribute wdo-name="UserListWDO[Context_Loop.loopCount]" name="userName"/></base-type></formal-parameter></formal-parameters></function-mappings></allocation-strategy></notification><join type="none"/><split type="none"><transition-id idref="4"/></split></route-activity><loop-begin-activity id="4"><name><localized-text><locale language="en">Loop [Begin]</locale></localized-text></name><join type="none"/><split type="none"><transition-id idref="3"/></split><loop-type name="while"/><condition><expression id="1" data-item-lhs="Context_Loop.loopCount" operation="&lt;" data-item-rhs="UserListWDO.size()" conjunction="and"/></condition><block-endpoint-ref activity-id="5"/></loop-begin-activity><loop-end-activity id="5"><name><localized-text><locale language="en">Loop [End]</locale></localized-text></name><join type="none"/><split type="none"><transition-id idref="5"/></split><block-endpoint-ref activity-id="4"/></loop-end-activity></activities><transitions><transition id="2" from-activity-idref="3" to-activity-idref="4"/><transition id="3" from-activity-idref="4" to-activity-idref="6"/><transition id="4" from-activity-idref="6" to-activity-idref="5"/><transition id="5" from-activity-idref="5" to-activity-idref="2"/><transition id="6" from-activity-idref="1" to-activity-idref="3"/></transitions></workflow-process>