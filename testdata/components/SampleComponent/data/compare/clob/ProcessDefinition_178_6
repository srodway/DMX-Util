<?xml version="1.0" encoding="UTF-8"?>
<workflow-process id="1126999418470800" process-version="1" language-version="1.0" released="true" category="PC5" createdBy="admin" creationDate="20090401T131500"><name>SamplePlannedItemPreApprovalCriteria</name><process-display-name><localized-text><locale language="en">Sample Planned Item Pre Approval Criteria</locale></localized-text></process-display-name><description><localized-text><locale language="en">A sample Approval criteria workflow that can be used for the master approval process.  Configure an Approval Criteria to raise the event that this workflow is enacted by then associate the approval criteria to the plan item.  When the planned item is submitted for approval the master approval workflow will trigger this workflow.  Once this is finished the Continue Approval Process activity will raise the event required by the Master Approval workflow to continue.  The Stop Approval Process will raise the event that will stop the approval process and make the planned item move back to an unapproved state.</locale></localized-text></description><enactment-mappings><mapping><source-attribute struct-name="curam.serviceplans.sl.struct.PlannedItemIDAndApprovalOccursWhenKey" name="caseID"/><target-attribute wdo-name="PreApprovalCriteriaSampleWDO" name="caseID"/></mapping><mapping><source-attribute struct-name="curam.serviceplans.sl.struct.PlannedItemIDAndApprovalOccursWhenKey" name="dtls.plannedItemID"/><target-attribute wdo-name="PreApprovalCriteriaSampleWDO" name="plannedItemID"/></mapping></enactment-mappings><wdos><wdo is-list-wdo="false" initialize-attributes="false"><wdo-name>PreApprovalCriteriaSampleWDO</wdo-name><display-name><localized-text><locale language="en">Pre Approval Criteria Sample WDO</locale></localized-text></display-name><attributes><attribute><attribute-name>caseID</attribute-name><display-name><localized-text><locale language="en">Service Plan ID (caseID)</locale></localized-text></display-name><type>INT64</type><required-at-enactment>true</required-at-enactment><process-output>false</process-output></attribute><attribute><attribute-name>plannedItemID</attribute-name><display-name><localized-text><locale language="en">Planned Item ID</locale></localized-text></display-name><type>INT64</type><required-at-enactment>true</required-at-enactment><process-output>false</process-output></attribute><attribute><attribute-name>decisionAnswer</attribute-name><display-name><localized-text><locale language="en">Decision Answer</locale></localized-text></display-name><type>STRING</type><required-at-enactment>false</required-at-enactment><process-output>false</process-output></attribute></attributes></wdo><wdo is-list-wdo="false" initialize-attributes="false"><wdo-name>PreApprovalCriteriaSampleConstantsWDO</wdo-name><display-name><localized-text><locale language="en">Pre Approval Criteria Sample Constants WDO</locale></localized-text></display-name><attributes><attribute><attribute-name>YES</attribute-name><display-name><localized-text><locale language="en">YES</locale></localized-text></display-name><type>STRING</type><required-at-enactment>false</required-at-enactment><process-output>false</process-output><constant-value>Yes</constant-value></attribute></attributes></wdo></wdos><activities><start-process-activity id="1"><name><localized-text><locale language="en">Start Process Activity</locale></localized-text></name><description><localized-text><locale language="en">The start process activity</locale></localized-text></description><split type="none"><transition-id idref="1"/></split></start-process-activity><end-process-activity id="2"><name><localized-text><locale language="en">End Process Activity</locale></localized-text></name><description><localized-text><locale language="en">The end process activity</locale></localized-text></description><join type="none"/></end-process-activity><automatic-activity id="4" category="AC1"><name><localized-text><locale language="en">Continue Approval Process</locale></localized-text></name><join type="none"/><split type="none"><transition-id idref="4"/></split><bpo-mapping interface-name="curam.serviceplans.workflow.wfl.intf.PlannedItemApprovals" method-name="passApprovalCriteria"><formal-parameters><formal-parameter index="0"><struct type="curam.serviceplans.workflow.wfl.struct.PlannedItemIDKey"><field name="plannedItemID"><base-type type="INT64"><wdo-attribute wdo-name="PreApprovalCriteriaSampleWDO" name="plannedItemID"/></base-type></field></struct></formal-parameter></formal-parameters></bpo-mapping></automatic-activity><automatic-activity id="5" category="AC1"><name><localized-text><locale language="en">Stop Approval Process</locale></localized-text></name><join type="none"/><split type="none"><transition-id idref="5"/></split><bpo-mapping interface-name="curam.serviceplans.workflow.wfl.intf.PlannedItemApprovals" method-name="failApprovalCriteria"><formal-parameters><formal-parameter index="0"><struct type="curam.serviceplans.facade.struct.PlannedItemIDKey"><field name="plannedItemIDKey"><struct type="curam.serviceplans.sl.struct.PlannedItemIDKey"><field name="plannedItemIDKey"><struct type="curam.serviceplans.sl.entity.struct.PlannedItemIDKey"><field name="plannedItemID"><base-type type="INT64"><wdo-attribute wdo-name="PreApprovalCriteriaSampleWDO" name="plannedItemID"/></base-type></field></struct></field></struct></field></struct></formal-parameter></formal-parameters></bpo-mapping></automatic-activity><decision-activity id="3" category="AC1"><name><localized-text><locale language="en">Should the approval process continue?</locale></localized-text></name><join type="none"/><split type="xor"><transition-id idref="2"/><transition-id idref="3"/></split><allocation-strategy type="function" identifier="curam.core.sl.intf.NotificationAllocationFunction.caseOwnerStrategy"><function-mappings><formal-parameters><formal-parameter index="0"><base-type type="INT64"><wdo-attribute wdo-name="PreApprovalCriteriaSampleWDO" name="caseID"/></base-type></formal-parameter></formal-parameters></function-mappings></allocation-strategy><message><message-text><localized-text><locale language="en">Please review the planned item and determine whether the approval process should continue.</locale></localized-text></message-text></message><decision-action><message><message-text><localized-text><locale language="en">Should the approval process continue for planned item %1</locale></localized-text></message-text><message-parameters><wdo-attribute wdo-name="PreApprovalCriteriaSampleWDO" name="plannedItemID"/></message-parameters></message></decision-action><secondary-actions><secondary-action page-id="ServicePlanDelivery_resolveViewPlanItemPage" open-modal="false"><message><message-text><localized-text><locale language="en">Link to Planned Item Home Page</locale></localized-text></message-text></message><link-parameter name="plannedItemID"><wdo-attribute wdo-name="PreApprovalCriteriaSampleWDO" name="plannedItemID"/></link-parameter></secondary-action></secondary-actions><question><message><message-text><localized-text><locale language="en">Should the approval process continue?</locale></localized-text></message-text></message><answers multiple-selection="false"><answer name="Yes"><answer-text><localized-text><locale language="en">Yes</locale></localized-text></answer-text><choice-output-mapping><wdo-attribute wdo-name="PreApprovalCriteriaSampleWDO" name="decisionAnswer"/><selected-value>Yes</selected-value></choice-output-mapping></answer><answer name="No"><answer-text><localized-text><locale language="en">No</locale></localized-text></answer-text><choice-output-mapping><wdo-attribute wdo-name="PreApprovalCriteriaSampleWDO" name="decisionAnswer"/><selected-value>No</selected-value></choice-output-mapping></answer></answers></question></decision-activity><route-activity id="6" category="AC1"><name><localized-text><locale language="en">Route</locale></localized-text></name><join type="xor"/><split type="none"><transition-id idref="6"/></split></route-activity></activities><transitions><transition id="1" from-activity-idref="1" to-activity-idref="3"/><transition id="2" from-activity-idref="3" to-activity-idref="4"><condition><expression id="1" data-item-lhs="PreApprovalCriteriaSampleWDO.decisionAnswer" operation="==" data-item-rhs="PreApprovalCriteriaSampleConstantsWDO.YES" conjunction="and"/></condition></transition><transition id="3" from-activity-idref="3" to-activity-idref="5"/><transition id="4" from-activity-idref="4" to-activity-idref="6"/><transition id="5" from-activity-idref="5" to-activity-idref="6"/><transition id="6" from-activity-idref="6" to-activity-idref="2"/></transitions></workflow-process>