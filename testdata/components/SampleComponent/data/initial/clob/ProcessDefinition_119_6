<?xml version="1.0" encoding="UTF-8"?>
<workflow-process id="1126999418470765" process-version="1" language-version="1.0" released="true" category="PC10" createdBy="admin" creationDate="20080516T210301"><name>PaymentsForDuplicateClient</name><process-display-name><localized-text><locale language="en">Payments For Duplicate Client</locale></localized-text></process-display-name><description><localized-text><locale language="en">Notifies the case owner of a case that a payment has been issued to a person who is marked as duplicate.</locale></localized-text></description><enactment-mappings><mapping><source-attribute struct-name="curam.core.struct.ConcernRoleKey" name="concernRoleID"/><target-attribute wdo-name="ConcernRoleDetailsCaseRefAndFinInstruction" name="concernRoleID"/></mapping><mapping><source-attribute struct-name="curam.core.struct.ILIFinInstructID" name="finInstructionID"/><target-attribute wdo-name="ConcernRoleDetailsCaseRefAndFinInstruction" name="instructID"/></mapping></enactment-mappings><wdos><wdo is-list-wdo="true" initialize-attributes="false"><wdo-name>CaseIDList</wdo-name><display-name><localized-text><locale language="en">CaseIDList</locale></localized-text></display-name><attributes><attribute><attribute-name>caseID</attribute-name><display-name><localized-text><locale language="en">caseID</locale></localized-text></display-name><type>INT64</type><required-at-enactment>false</required-at-enactment><process-output>false</process-output></attribute></attributes></wdo><wdo is-list-wdo="false" initialize-attributes="false"><wdo-name>ConcernRoleDetailsCaseRefAndFinInstruction</wdo-name><display-name><localized-text><locale language="en">ConcernRoleDetailsCaseRefAndFinInstruction</locale></localized-text></display-name><attributes><attribute><attribute-name>concernRoleID</attribute-name><display-name><localized-text><locale language="en">concernRoleID</locale></localized-text></display-name><type>INT64</type><required-at-enactment>true</required-at-enactment><process-output>false</process-output></attribute><attribute><attribute-name>concernRoleName</attribute-name><display-name><localized-text><locale language="en">concernRoleName</locale></localized-text></display-name><type>STRING</type><required-at-enactment>false</required-at-enactment><process-output>false</process-output></attribute><attribute><attribute-name>caseReference</attribute-name><display-name><localized-text><locale language="en">caseReference</locale></localized-text></display-name><type>STRING</type><required-at-enactment>false</required-at-enactment><process-output>false</process-output></attribute><attribute><attribute-name>instructID</attribute-name><display-name><localized-text><locale language="en">instructID</locale></localized-text></display-name><type>INT64</type><required-at-enactment>true</required-at-enactment><process-output>false</process-output></attribute></attributes></wdo></wdos><activities><start-process-activity id="1"><name><localized-text><locale language="en">Start Process Activity</locale></localized-text></name><description><localized-text><locale language="en">The start process activity</locale></localized-text></description><split type="none"><transition-id idref="2"/></split></start-process-activity><end-process-activity id="2"><name><localized-text><locale language="en">End Process Activity</locale></localized-text></name><description><localized-text><locale language="en">The end process activity</locale></localized-text></description><join type="none"/></end-process-activity><automatic-activity id="3"><name><localized-text><locale language="en">getConcernRoleNameHelper</locale></localized-text></name><description><localized-text><locale language="en">Retrieves the concern role name for the duplicate client.</locale></localized-text></description><join type="none"/><split type="none"><transition-id idref="9"/></split><bpo-mapping interface-name="curam.core.intf.ConcernRole" method-name="readConcernRoleName"><formal-parameters><formal-parameter index="0"><struct type="curam.core.struct.ConcernRoleKey"><field name="concernRoleID"><base-type type="INT64"><wdo-attribute wdo-name="ConcernRoleDetailsCaseRefAndFinInstruction" name="concernRoleID"/></base-type></field></struct></formal-parameter></formal-parameters><return><struct><field name="concernRoleName"><base-type><wdo-attribute wdo-name="ConcernRoleDetailsCaseRefAndFinInstruction" name="concernRoleName"/></base-type></field></struct></return></bpo-mapping></automatic-activity><automatic-activity id="6"><name><localized-text><locale language="en">getCaseRefHelper</locale></localized-text></name><description><localized-text><locale language="en">Retrieves the case reference for the case.</locale></localized-text></description><join type="none"/><split type="none"><transition-id idref="6"/></split><bpo-mapping interface-name="curam.core.intf.CaseHeader" method-name="readCaseReferenceByCaseID"><formal-parameters><formal-parameter index="0"><struct type="curam.core.struct.CaseSearchKey"><field name="caseID"><base-type type="INT64"><wdo-attribute wdo-name="CaseIDList[Context_Loop.loopCount]" name="caseID"/></base-type></field></struct></formal-parameter></formal-parameters><return><struct><field name="caseReference"><base-type><wdo-attribute wdo-name="ConcernRoleDetailsCaseRefAndFinInstruction" name="caseReference"/></base-type></field></struct></return></bpo-mapping></automatic-activity><automatic-activity id="7"><name><localized-text><locale language="en">getCaseIDList</locale></localized-text></name><description><localized-text><locale language="en">Retrieves a list of cases which need payments generated.</locale></localized-text></description><join type="none"/><split type="none"><transition-id idref="10"/></split><bpo-mapping interface-name="curam.core.facade.intf.Financial" method-name="searchCaseIDByFinInstructID"><formal-parameters><formal-parameter index="0"><struct type="curam.core.struct.ILIFinInstructID"><field name="finInstructionID"><base-type type="INT64"><wdo-attribute wdo-name="ConcernRoleDetailsCaseRefAndFinInstruction" name="instructID"/></base-type></field></struct></formal-parameter></formal-parameters><return><struct><field name="dtlsList"><struct><field name="caseID"><base-type><wdo-attribute wdo-name="CaseIDList" name="caseID"/></base-type></field></struct></field></struct></return></bpo-mapping></automatic-activity><route-activity id="5" category="AC1"><name><localized-text><locale language="en">Inform Case Owner of Payments created for Duplicate Client</locale></localized-text></name><description><localized-text><locale language="en">This step sets up the notification details which will be displayed to the case owners. For every case retrieved from the list, the allocation strategy gets the list of case owners for each case.</locale></localized-text></description><notification delivery-mechanism="DM1"><subject><message><message-text><localized-text><locale language="en">A Payment has been created for duplicate client %1s for Case %2s.</locale></localized-text></message-text><message-parameters><wdo-attribute wdo-name="ConcernRoleDetailsCaseRefAndFinInstruction" name="concernRoleName"/><wdo-attribute wdo-name="ConcernRoleDetailsCaseRefAndFinInstruction" name="caseReference"/></message-parameters></message></subject><body><message><message-text><localized-text><locale language="en">A Payment has been created for duplicate client %1s for Case %2s.</locale></localized-text></message-text><message-parameters><wdo-attribute wdo-name="ConcernRoleDetailsCaseRefAndFinInstruction" name="concernRoleName"/><wdo-attribute wdo-name="ConcernRoleDetailsCaseRefAndFinInstruction" name="caseReference"/></message-parameters></message></body><allocation-strategy type="function" identifier="curam.core.sl.intf.NotificationAllocationFunction.caseOwnerStrategy"><function-mappings><formal-parameters><formal-parameter index="0"><base-type type="INT64"><wdo-attribute wdo-name="CaseIDList[Context_Loop.loopCount]" name="caseID"/></base-type></formal-parameter></formal-parameters></function-mappings></allocation-strategy><actions><action page-id="Case_resolveCaseHome" principal-action="false" open-modal="false"><message><message-text><localized-text><locale language="en">View Case Home page</locale></localized-text></message-text></message><link-parameter name="caseID"><wdo-attribute wdo-name="CaseIDList[Context_Loop.loopCount]" name="caseID"/></link-parameter></action></actions></notification><join type="none"/><split type="none"><transition-id idref="7"/></split></route-activity><loop-begin-activity id="8"><name><localized-text><locale language="en">Loop [Begin]</locale></localized-text></name><description><localized-text><locale language="en">This step loops through the list of cases which have outstanding payments for the duplicate client.</locale></localized-text></description><join type="none"/><split type="none"><transition-id idref="11"/></split><loop-type name="while"/><condition><expression id="1" data-item-lhs="Context_Loop.loopCount" operation="&lt;" data-item-rhs="CaseIDList.size()" conjunction="and"/></condition><block-endpoint-ref activity-id="9"/></loop-begin-activity><loop-end-activity id="9"><name><localized-text><locale language="en">Loop [End]</locale></localized-text></name><description><localized-text><locale language="en">This loop ends when the list ends for all the cases retrieved.</locale></localized-text></description><join type="none"/><split type="none"><transition-id idref="8"/></split><block-endpoint-ref activity-id="8"/></loop-end-activity></activities><transitions><transition id="2" from-activity-idref="1" to-activity-idref="3"/><transition id="6" from-activity-idref="6" to-activity-idref="5"/><transition id="7" from-activity-idref="5" to-activity-idref="9"/><transition id="8" from-activity-idref="9" to-activity-idref="2"/><transition id="9" from-activity-idref="3" to-activity-idref="7"/><transition id="10" from-activity-idref="7" to-activity-idref="8"/><transition id="11" from-activity-idref="8" to-activity-idref="6"/></transitions></workflow-process>