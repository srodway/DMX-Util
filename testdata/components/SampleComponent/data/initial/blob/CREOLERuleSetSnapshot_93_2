<?xml version="1.0" encoding="UTF-8"?><!--
  Licensed Materials - Property of IBM
 
  Copyright IBM Corporation 2013. All Rights Reserved.

  US Government Users Restricted Rights - Use, duplication or disclosure 
  restricted by GSA ADP Schedule Contract with IBM Corp.
--><RuleSet name="PDCNameValidationRuleSet">
  <Annotations>
    <EditorMetadata>
      <folders>
        <diagram id="ValidationResult.standardValidations">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354651584700" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.standardValidations"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.hasLastNameBeenEntered">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354651640236" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.hasLastNameBeenEntered"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.isProspect">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354651716565" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.isProspect"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.concernRoleRecord">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354651764992" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.concernRoleRecord"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.preModifyValidations">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354652028409" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.preModifyValidations"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.postModifyValidations">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354652033390" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.postModifyValidations"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.validateLastName">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354652051587" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.validateLastName"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.modifyDuplicateClientValidation">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354652171537" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.modifyDuplicateClientValidation"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.nameEvidence">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354653739010" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.nameEvidence"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.nameEvidenceForClientAndType">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354654100835" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.nameEvidenceForClientAndType"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.evidenceSuccessionID">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354655603262" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.evidenceSuccessionID"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.doesRegOrPrefNameExist">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354655692805" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.doesRegOrPrefNameExist"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.validateProspectDuplicateName">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354656092690" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.validateProspectDuplicateName"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.validateDuplicateName">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354656641318" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.validateDuplicateName"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.validatePersonDuplicateName">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354656978307" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.validatePersonDuplicateName"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.regOrPreferredName">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354657366533" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.regOrPreferredName"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.nameEvidenceForClient">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354705483435" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.nameEvidenceForClient"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.doesNameEvidenceExist">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354705970702" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.doesNameEvidenceExist"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.validatePersonInitialNameIsRegOrPref">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354706220322" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.validatePersonInitialNameIsRegOrPref"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.validateProspectInitialNameIsRegOrPref">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354706665064" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.validateProspectInitialNameIsRegOrPref"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.validateInitialNameIsRegOrPref">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354706982038" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.validateInitialNameIsRegOrPref"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.activeNameEvidenceRow">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354742456486" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.activeNameEvidenceRow"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.hasTypeBeenChanged">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354742646021" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.hasTypeBeenChanged"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.validateTypeChanged">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354742904879" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.validateTypeChanged"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.preCreateValidations">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354743033897" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.preCreateValidations"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.detailsValidations">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1355155704870" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.detailsValidations"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.postCreateValidations">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1355155710430" name=""/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.postCreateValidations"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.caseID">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1357145839386" name="caseID"/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.caseID"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.evidence">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1357145975377" name="evidence"/>
          </Annotations>
          <Attributes>
            <Attribute id="ValidationResult.evidence"/>
          </Attributes>
        </diagram>
        <diagram id="ValidationResult.effectiveDateAfterDOBValidation" internalID="PDCNameValidationRuleSet1355754771669">
          <Annotations internalID="PDCNameValidationRuleSet1355754771652">
            <Label internalID="PDCNameValidationRuleSet1355754771651" label-id="PDCNameValidationRuleSetlabelID_1355754771650" name="effectiveDateAfterDOBValidation"/>
          </Annotations>
          <Attributes internalID="PDCNameValidationRuleSet1355754771872">
            <Attribute id="ValidationResult.effectiveDateAfterDOBValidation" internalID="PDCNameValidationRuleSet1355754772619"/>
          </Attributes>
        </diagram>
      </folders>
      <codetables>
        <codetable name="ConcernRoleType" value="RL7"/>
        <codetable name="AlternateNameType" value="AT1"/>
        <codetable name="AlternateNameType" value="AT2"/>
      </codetables>
      <config>
        <faconfig/>
      </config>
    </EditorMetadata>
  </Annotations>
  <Class extends="DefaultEvidenceValidationResult" extendsRuleSet="EvidenceValidationRuleSet" name="ValidationResult">
    <Attribute name="evidence">
      <type>
        <ruleclass name="PDCName" ruleset="PDCNameRuleSet"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>
    <Attribute internalID="id1355754747994" name="description">
      <type internalID="id1355754747995">
        <javaclass internalID="id1355754747996" name="curam.creole.value.Message"/>
      </type>
      <derivation internalID="id1355754747997">
        <ResourceMessage internalID="id1355754747998" key="PDCNameValidationResult.description" resourceBundle="curam.pdc.rules.PDCNameValidationRuleSet">
          <reference attribute="concernRoleName" internalID="id1355754747999">
            <reference attribute="concernRoleRecord" internalID="id1355754748000"/>
          </reference>
        </ResourceMessage>
      </derivation>
    </Attribute>
    <Attribute name="standardValidations">
      <type>
        <javaclass name="List">
          <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <fixedlist>
          <listof>
            <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
          </listof>
          <members>
            <reference attribute="validateLastName"/>
            <reference attribute="validateInitialNameIsRegOrPref"/>
            <reference attribute="validateDuplicateName"/>
          </members>
        </fixedlist>
      </derivation>
    </Attribute>
    <Attribute name="detailsValidations">
      <type>
        <javaclass name="java.util.List">
          <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <null/>
      </derivation>
    </Attribute>
    <Attribute name="preCreateValidations">
      <type>
        <javaclass name="java.util.List">
          <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <null/>
      </derivation>
    </Attribute>
    <Attribute name="preModifyValidations">
      <type>
        <javaclass name="List">
          <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <fixedlist>
          <listof>
            <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
          </listof>
          <members>
            <reference attribute="validateTypeChanged"/>
          </members>
        </fixedlist>
      </derivation>
    </Attribute>
    <Attribute name="postCreateValidations">
      <type>
        <javaclass name="List">
          <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <fixedlist>
          <listof>
            <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
          </listof>
          <members>
            <reference attribute="createDuplicateClientValidation"/>
          </members>
        </fixedlist>
      </derivation>
    </Attribute>
    <Attribute name="postModifyValidations">
      <type>
        <javaclass name="List">
          <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <fixedlist>
          <listof>
            <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
          </listof>
          <members>
            <reference attribute="modifyDuplicateClientValidation"/>
            <reference attribute="effectiveDateAfterDOBValidation"/>
          </members>
        </fixedlist>
      </derivation>
    </Attribute>
    <Attribute name="duplicateCheck">
      <type>
        <ruleclass name="DuplicateClientCheck" ruleset="PDCDuplicateClientValidationRuleSet"/>
      </type>
      <derivation>
        <create ruleclass="DuplicateClientCheck" ruleset="PDCDuplicateClientValidationRuleSet">
          <specify attribute="concernRoleID">
            <reference attribute="participantRoleID">
              <reference attribute="related_participant">
                <reference attribute="evidence"/>
              </reference>
            </reference>
          </specify>
        </create>
      </derivation>
    </Attribute>
    <Attribute name="modifyDuplicateClientValidation">
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
      </type>
      <derivation>
        <create ruleclass="Validation" ruleset="EvidenceValidationRuleSet">
          <reference attribute="isConcernRoleDuplicate">
            <reference attribute="duplicateCheck"/>
          </reference>
          <ResourceMessage key="ERR_NAME_XRV_DUPLICATE_CLIENT_MODIFY" resourceBundle="curam.pdc.rules.PDCNameValidationRuleSet"/>
        </create>
      </derivation>
    </Attribute>
    <Attribute name="createDuplicateClientValidation">
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
      </type>
      <derivation>
        <create ruleclass="Validation" ruleset="EvidenceValidationRuleSet">
          <reference attribute="isConcernRoleDuplicate">
            <reference attribute="duplicateCheck"/>
          </reference>
          <ResourceMessage key="ERR_NAME_XRV_DUPLICATE_CLIENT_CREATE" resourceBundle="curam.pdc.rules.PDCNameValidationRuleSet"/>
        </create>
      </derivation>
    </Attribute>
    <Attribute name="hasLastNameBeenEntered">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
        <not>
          <equals>
            <Annotations>
              <Label label-id="PDCNameValidationRuleSetlabelID_1354651668169" name=""/>
            </Annotations>
            <reference attribute="lastName">
              <reference attribute="evidence"/>
            </reference>
            <null/>
          </equals>
        </not>
      </derivation>
    </Attribute>
    <Attribute name="isProspect">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
        <choose>
          <type>
            <javaclass name="Boolean"/>
          </type>
          <when>
            <condition>
              <equals>
                <Annotations>
                  <Label label-id="PDCNameValidationRuleSetlabelID_1354651856890" name=""/>
                </Annotations>
                <reference attribute="concernRoleType">
                  <reference attribute="concernRoleRecord"/>
                </reference>
                <Code table="ConcernRoleType">
                  <Annotations>
                    <Label label-id="PDCNameValidationRuleSetlabelID_1354651893274" name=""/>
                  </Annotations>
                  <String value="RL7">
                    <Annotations>
                      <Label label-id="PDCNameValidationRuleSetlabelID_1354651893270" name=""/>
                    </Annotations>
                  </String>
                </Code>
              </equals>
            </condition>
            <value>
              <true/>
            </value>
          </when>
          <otherwise>
            <value>
              <false/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    <Attribute name="concernRoleRecord">
      <type>
        <ruleclass name="ConcernRole" ruleset="ParticipantEntitiesRuleSet"/>
      </type>
      <derivation>
        <singleitem onEmpty="error" onMultiple="error">
          <readall ruleclass="ConcernRole" ruleset="ParticipantEntitiesRuleSet">
            <match retrievedattribute="concernRoleID">
              <reference attribute="participantRoleID">
                <reference attribute="related_participant">
                  <reference attribute="evidence"/>
                </reference>
              </reference>
            </match>
          </readall>
        </singleitem>
      </derivation>
    </Attribute>
    <Attribute name="validateLastName">
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
      </type>
      <derivation>
        <create ruleclass="Validation" ruleset="EvidenceValidationRuleSet">
          <choose>
            <type>
              <javaclass name="Boolean"/>
            </type>
            <when>
              <condition>
                <reference attribute="isProspect"/>
              </condition>
              <value>
                <false/>
              </value>
            </when>
            <otherwise>
              <value>
                <not>
                  <reference attribute="hasLastNameBeenEntered"/>
                </not>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage key="ERR_NAME_RV_PERSON_LAST_NAME_NOT_ENTERED" resourceBundle="curam.pdc.rules.PDCNameValidationRuleSet">
            <Annotations>
              <Label label-id="PDCNameValidationRuleSetlabelID_1354652317310" name=""/>
            </Annotations>
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute name="nameEvidence">
      <type>
        <javaclass name="List">
          <ruleclass name="NameEvidence" ruleset="ParticipantEvidenceRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <readall ruleclass="NameEvidence" ruleset="ParticipantEvidenceRuleSet">
          <match retrievedattribute="caseID">
            <reference attribute="evidenceCaseID"/>
          </match>
        </readall>
      </derivation>
    </Attribute>
    <Attribute name="nameEvidenceForClientAndType">
      <type>
        <javaclass name="List">
          <ruleclass name="NameEvidence" ruleset="ParticipantEvidenceRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <filter>
          <list>
            <reference attribute="nameEvidence"/>
          </list>
          <listitemexpression>
            <all>
              <fixedlist>
                <listof>
                  <javaclass name="Boolean"/>
                </listof>
                <members>
                  <equals>
                    <Annotations>
                      <Label label-id="PDCNameValidationRuleSetlabelID_1354654141807" name=""/>
                    </Annotations>
                    <reference attribute="participantRoleID">
                      <reference attribute="related_participant">
                        <reference attribute="evidence"/>
                      </reference>
                    </reference>
                    <reference attribute="participantRoleID">
                      <reference attribute="related_participant">
                        <current/>
                      </reference>
                    </reference>
                  </equals>
                  <not>
                    <equals>
                      <reference attribute="evidenceSuccessionID"/>
                      <reference attribute="successionID">
                        <current/>
                      </reference>
                    </equals>
                  </not>
                  <equals>
                    <Annotations>
                      <Label label-id="PDCNameValidationRuleSetlabelID_1354697680084" name=""/>
                    </Annotations>
                    <reference attribute="nameType">
                      <reference attribute="evidence"/>
                    </reference>
                    <reference attribute="nameType">
                      <current/>
                    </reference>
                  </equals>
                </members>
              </fixedlist>
            </all>
          </listitemexpression>
        </filter>
      </derivation>
    </Attribute>
    <Attribute name="evidenceSuccessionID">
      <type>
        <javaclass name="Number"/>
      </type>
      <derivation>
        <reference attribute="successionID">
          <reference attribute="evidence"/>
        </reference>
      </derivation>
    </Attribute>
    <Attribute name="evidenceCaseID">
      <type>
        <javaclass name="Number"/>
      </type>
      <derivation>
        <reference attribute="caseID">
          <reference attribute="evidence"/>
        </reference>
      </derivation>
    </Attribute>
    <Attribute name="doesRegOrPrefNameExist">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
        <compare comparison="&gt;">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354655702620" name=""/>
          </Annotations>
          <property name="size">
            <object>
              <reference attribute="nameEvidenceForClientAndType"/>
            </object>
          </property>
          <Number value="0"/>
        </compare>
      </derivation>
    </Attribute>
    <Attribute name="validateProspectDuplicateName">
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
      </type>
      <derivation>
        <create ruleclass="Validation" ruleset="EvidenceValidationRuleSet">
          <choose>
            <type>
              <javaclass name="Boolean"/>
            </type>
            <when>
              <condition>
                <reference attribute="regOrPreferredName"/>
              </condition>
              <value>
                <reference attribute="doesRegOrPrefNameExist"/>
              </value>
            </when>
            <otherwise>
              <value>
                <false/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage key="ERR_NAME_RV_PROSPECT_PERSON_MULTIPLE_REG_PREF_NAME" resourceBundle="curam.pdc.rules.PDCNameValidationRuleSet">
            <Annotations>
              <Label label-id="PDCNameValidationRuleSetlabelID_1354656880801" name=""/>
            </Annotations>
            <reference attribute="nameType">
              <reference attribute="evidence"/>
            </reference>
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute name="validatePersonDuplicateName">
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
      </type>
      <derivation>
        <create ruleclass="Validation" ruleset="EvidenceValidationRuleSet">
          <choose>
            <type>
              <javaclass name="Boolean"/>
            </type>
            <when>
              <condition>
                <reference attribute="regOrPreferredName"/>
              </condition>
              <value>
                <reference attribute="doesRegOrPrefNameExist"/>
              </value>
            </when>
            <otherwise>
              <value>
                <false/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage key="ERR_NAME_RV_PERSON_MULTIPLE_REG_PREF_NAME" resourceBundle="curam.pdc.rules.PDCNameValidationRuleSet">
            <Annotations>
              <Label label-id="PDCNameValidationRuleSetlabelID_1354656994615" name=""/>
            </Annotations>
            <reference attribute="nameType">
              <reference attribute="evidence"/>
            </reference>
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute name="validateDuplicateName">
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
      </type>
      <derivation>
        <choose>
          <type>
            <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
          </type>
          <when>
            <condition>
              <reference attribute="isProspect"/>
            </condition>
            <value>
              <reference attribute="validateProspectDuplicateName"/>
            </value>
          </when>
          <otherwise>
            <value>
              <reference attribute="validatePersonDuplicateName"/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    <Attribute name="regOrPreferredName">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
        <any>
          <fixedlist>
            <listof>
              <javaclass name="Boolean"/>
            </listof>
            <members>
              <equals>
                <Annotations>
                  <Label label-id="PDCNameValidationRuleSetlabelID_1354657425352" name=""/>
                </Annotations>
                <reference attribute="nameType">
                  <reference attribute="evidence"/>
                </reference>
                <Code table="AlternateNameType">
                  <Annotations>
                    <Label label-id="PDCNameValidationRuleSetlabelID_1354657464330" name=""/>
                  </Annotations>
                  <String value="AT1">
                    <Annotations>
                      <Label label-id="PDCNameValidationRuleSetlabelID_1354657464326" name=""/>
                    </Annotations>
                  </String>
                </Code>
              </equals>
              <equals>
                <Annotations>
                  <Label label-id="PDCNameValidationRuleSetlabelID_1354657430646" name=""/>
                </Annotations>
                <reference attribute="nameType">
                  <reference attribute="evidence"/>
                </reference>
                <Code table="AlternateNameType">
                  <Annotations>
                    <Label label-id="PDCNameValidationRuleSetlabelID_1354657528664" name=""/>
                  </Annotations>
                  <String value="AT2">
                    <Annotations>
                      <Label label-id="PDCNameValidationRuleSetlabelID_1354657528660" name=""/>
                    </Annotations>
                  </String>
                </Code>
              </equals>
            </members>
          </fixedlist>
        </any>
      </derivation>
    </Attribute>
    <Attribute name="nameEvidenceForClient">
      <type>
        <javaclass name="List">
          <ruleclass name="NameEvidence" ruleset="ParticipantEvidenceRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <filter>
          <list>
            <reference attribute="nameEvidence"/>
          </list>
          <listitemexpression>
            <all>
              <fixedlist>
                <listof>
                  <javaclass name="Boolean"/>
                </listof>
                <members>
                  <equals>
                    <Annotations>
                      <Label label-id="PDCNameValidationRuleSetlabelID_1354705540056" name=""/>
                    </Annotations>
                    <reference attribute="participantRoleID">
                      <reference attribute="related_participant">
                        <reference attribute="evidence"/>
                      </reference>
                    </reference>
                    <reference attribute="participantRoleID">
                      <reference attribute="related_participant">
                        <current/>
                      </reference>
                    </reference>
                  </equals>
                  <not>
                    <equals>
                      <Annotations>
                        <Label label-id="PDCNameValidationRuleSetlabelID_1354705774205" name=""/>
                      </Annotations>
                      <reference attribute="evidenceSuccessionID"/>
                      <reference attribute="successionID">
                        <current/>
                      </reference>
                    </equals>
                  </not>
                </members>
              </fixedlist>
            </all>
          </listitemexpression>
        </filter>
      </derivation>
    </Attribute>
    <Attribute name="doesNameEvidenceExist">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
        <compare comparison="&gt;">
          <Annotations>
            <Label label-id="PDCNameValidationRuleSetlabelID_1354705976295" name=""/>
          </Annotations>
          <property name="size">
            <object>
              <reference attribute="nameEvidenceForClient"/>
            </object>
          </property>
          <Number value="0"/>
        </compare>
      </derivation>
    </Attribute>
    <Attribute name="validatePersonInitialNameIsRegOrPref">
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
      </type>
      <derivation>
        <create ruleclass="Validation" ruleset="EvidenceValidationRuleSet">
          <choose>
            <type>
              <javaclass name="Boolean"/>
            </type>
            <when>
              <condition>
                <not>
                  <reference attribute="regOrPreferredName"/>
                </not>
              </condition>
              <value>
                <not>
                  <reference attribute="doesNameEvidenceExist"/>
                </not>
              </value>
            </when>
            <otherwise>
              <value>
                <false/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage key="ERR_NAME_RV_PERSON_INTIAL_NAME_NOT_REG_PREF" resourceBundle="curam.pdc.rules.PDCNameValidationRuleSet">
            <Annotations>
              <Label label-id="PDCNameValidationRuleSetlabelID_1354706328062" name=""/>
            </Annotations>
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute name="validateProspectInitialNameIsRegOrPref">
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
      </type>
      <derivation>
        <create ruleclass="Validation" ruleset="EvidenceValidationRuleSet">
          <choose>
            <type>
              <javaclass name="Boolean"/>
            </type>
            <when>
              <condition>
                <not>
                  <reference attribute="regOrPreferredName"/>
                </not>
              </condition>
              <value>
                <not>
                  <reference attribute="doesRegOrPrefNameExist"/>
                </not>
              </value>
            </when>
            <otherwise>
              <value>
                <false/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage key="ERR_NAME_RV_PROSPECT_PERSON_INTIAL_NAME_NOT_REG_PREF" resourceBundle="curam.pdc.rules.PDCNameValidationRuleSet">
            <Annotations>
              <Label label-id="PDCNameValidationRuleSetlabelID_1354706687604" name=""/>
            </Annotations>
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute name="validateInitialNameIsRegOrPref">
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
      </type>
      <derivation>
        <choose>
          <type>
            <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
          </type>
          <when>
            <condition>
              <reference attribute="isProspect"/>
            </condition>
            <value>
              <reference attribute="validateProspectInitialNameIsRegOrPref"/>
            </value>
          </when>
          <otherwise>
            <value>
              <reference attribute="validatePersonInitialNameIsRegOrPref"/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    <Attribute name="hasTypeBeenChanged">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
        <choose>
          <type>
            <javaclass name="Boolean"/>
          </type>
          <when>
            <condition>
              <equals>
                <reference attribute="status">
                  <reference attribute="evidence"/>
                </reference>
                <Code table="EvidenceDescriptorStatus">
                  <String value="EDS1"/>
                </Code>
              </equals>
            </condition>
            <value>
              <not>
                <equals>
                  <reference attribute="nameType">
                    <reference attribute="activeNameEvidenceRow"/>
                  </reference>
                  <reference attribute="nameType">
                    <reference attribute="evidence"/>
                  </reference>
                </equals>
              </not>
            </value>
          </when>
          <otherwise>
            <value>
              <false/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    <Attribute name="activeNameEvidenceRow">
      <type>
        <ruleclass name="ActiveNameEvidenceRow" ruleset="ParticipantEvidenceRuleSet"/>
      </type>
      <derivation>
        <singleitem onEmpty="returnNull" onMultiple="returnFirst">
          <readall ruleclass="ActiveNameEvidenceRow" ruleset="ParticipantEvidenceRuleSet">
            <match retrievedattribute="correctionSetID">
              <reference attribute="correctionSetID">
                <reference attribute="evidence"/>
              </reference>
            </match>
          </readall>
        </singleitem>
      </derivation>
    </Attribute>
    <Attribute name="validateTypeChanged">
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet"/>
      </type>
      <derivation>
        <create ruleclass="Validation" ruleset="EvidenceValidationRuleSet">
          <reference attribute="hasTypeBeenChanged"/>
          <ResourceMessage key="ERR_NAME_FV_TYPE_CANNOT_BE_MODIFIED" resourceBundle="curam.pdc.rules.PDCNameValidationRuleSet">
            <Annotations>
              <Label label-id="PDCNameValidationRuleSetlabelID_1354742921704" name=""/>
            </Annotations>
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute internalID="id1355754748002" name="effectiveDateAfterDOBValidation">
      <type internalID="id1355754748003">
        <ruleclass internalID="id1355754748004" name="Validation" ruleset="EvidenceValidationRuleSet"/>
      </type>
      <derivation internalID="id1355754748005">
        <create internalID="id1355754748006" ruleclass="Validation" ruleset="EvidenceValidationRuleSet">
          <choose internalID="id1355754748007">
            <type internalID="id1355754748008">
              <javaclass internalID="id1355754748009" name="Boolean"/>
            </type>
            <when internalID="id1355754748010">
              <condition internalID="id1355754748011">
                <all internalID="id1355754748012">
                  <fixedlist internalID="id1355754748013">
                    <listof internalID="id1355754748014">
                      <javaclass internalID="id1355754748015" name="Boolean"/>
                    </listof>
                    <members internalID="id1355754748016">
                      <not internalID="id1355754748017">
                        <equals internalID="id1355754748018">
                          <reference attribute="dateOfBirth" internalID="id1355754748019"/>
                          <null internalID="id1355754748020"/>
                        </equals>
                      </not>
                      <not internalID="id1355754748021">
                        <equals internalID="id1355754748022">
                          <reference attribute="effectiveDate" internalID="id1355754748023"/>
                          <null/>
                        </equals>
                      </not>
                    </members>
                  </fixedlist>
                </all>
              </condition>
              <value internalID="id1355754748025">
                <compare comparison="&gt;" internalID="id1355754748026">
                  <reference attribute="dateOfBirth" internalID="id1355754748027"/>
                  <reference attribute="effectiveDate" internalID="id1355754748028"/>
                </compare>
              </value>
            </when>
            <otherwise internalID="id1355754748029">
              <value internalID="id1355754748030">
                <false internalID="id1355754748031"/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage internalID="id1355754748032" key="ERR_NAME_XRV_EFFECTIVE_DATE_DOB" resourceBundle="curam.pdc.rules.PDCNameValidationRuleSet">
            <reference attribute="concernRoleName" internalID="id1355754748033">
              <reference attribute="concernRoleRecord" internalID="id1355754748034"/>
            </reference>
            <reference attribute="dateOfBirth" internalID="id1355754748035"/>
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute internalID="id1355754748036" name="dateOfBirth">
      <type internalID="id1355754748037">
        <javaclass internalID="id1355754748038" name="curam.util.type.Date"/>
      </type>
      <derivation internalID="id1355754748039">
        <choose internalID="id1355754748040">
          <type internalID="id1355754748041">
            <javaclass internalID="id1355754748042" name="curam.util.type.Date"/>
          </type>
          <when internalID="id1355754748043">
            <condition internalID="id1355754748044">
              <not internalID="id1355754748045">
                <equals internalID="id1355754748046">
                  <reference attribute="birthAndDeathEvidenceForClient" internalID="id1355754748047"/>
                  <null internalID="id1355754748048"/>
                </equals>
              </not>
            </condition>
            <value internalID="id1355754748049">
              <reference attribute="dateOfBirth" internalID="id1355754748050">
                <reference attribute="birthAndDeathEvidenceForClient" internalID="id1355754748051"/>
              </reference>
            </value>
          </when>
          <otherwise internalID="id1355754748052">
            <value internalID="id1355754748053">
              <null internalID="id1355754748054"/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    <Attribute name="birthAndDeathEvidence">
      <type>
        <javaclass name="List">
          <ruleclass name="BirthAndDeathEvidence" ruleset="ParticipantEvidenceRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <readall ruleclass="BirthAndDeathEvidence" ruleset="ParticipantEvidenceRuleSet">
          <match retrievedattribute="caseID">
            <reference attribute="caseID"/>
          </match>
        </readall>
      </derivation>
    </Attribute>
    <Attribute name="birthAndDeathEvidenceForClient">
      <type>
        <ruleclass name="BirthAndDeathEvidence" ruleset="ParticipantEvidenceRuleSet"/>
      </type>
      <derivation>
        <singleitem onEmpty="returnNull" onMultiple="returnFirst">
          <filter>
            <list>
              <reference attribute="birthAndDeathEvidence"/>
            </list>
            <listitemexpression>
              <all>
                <fixedlist>
                  <listof>
                    <javaclass name="Boolean"/>
                  </listof>
                  <members>
                    <not>
                      <equals>
                        <reference attribute="evidenceSuccessionID"/>
                        <reference attribute="successionID">
                          <current/>
                        </reference>
                      </equals>
                    </not>
                    <equals>
                      <reference attribute="participantRoleID">
                        <reference attribute="related_participant">
                          <reference attribute="evidence"/>
                        </reference>
                      </reference>
                      <reference attribute="participantRoleID">
                        <reference attribute="related_person">
                          <current/>
                        </reference>
                      </reference>
                    </equals>
                  </members>
                </fixedlist>
              </all>
            </listitemexpression>
          </filter>
        </singleitem>
      </derivation>
    </Attribute>
    <Attribute internalID="id1355754748063" name="caseID">
      <type internalID="id1355754748064">
        <javaclass internalID="id1355754748065" name="Number"/>
      </type>
      <derivation internalID="id1355754748066">
        <reference attribute="caseID" internalID="id1355754748067">
          <reference attribute="evidence" internalID="id1355754748068"/>
        </reference>
      </derivation>
    </Attribute>
    <Attribute internalID="id1355754748069" name="effectiveDate">
      <type internalID="id1355754748070">
        <javaclass internalID="id1355754748071" name="curam.util.type.Date"/>
      </type>
      <derivation internalID="id1355754748072">
        <reference attribute="effectiveFrom" internalID="id1355754748073">
          <reference attribute="evidence" internalID="id1355754748074"/>
        </reference>
      </derivation>
    </Attribute>
  </Class>
</RuleSet>