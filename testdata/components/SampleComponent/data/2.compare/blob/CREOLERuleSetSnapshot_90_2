<?xml version="1.0" encoding="UTF-8"?><!--
  Licensed Materials - Property of IBM

  PID 5725-H26

  Copyright IBM Corporation 2014,2015. All Rights Reserved.

  US Government Users Restricted Rights - Use, duplication or disclosure
  restricted by GSA ADP Schedule Contract with IBM Corp.
--><RuleSet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="IncapacityBenefitRuleSet" xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
  <Class name="IncapacityBenefitAmountObjectives" xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
    <Initialization>
      <Attribute name="programCalculator">
        <type>
          <javaclass name="curam.creole.value.Timeline">
            <ruleclass name="IBProgramCalculator"/>
          </javaclass>
        </type>
      </Attribute>
      <Attribute name="caseParticipantRole">
        <type>
          <ruleclass name="CaseParticipantRole" ruleset="CaseEntitiesRuleSet"/>
        </type>
      </Attribute>
    </Initialization>


    <Attribute name="description">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <ResourceMessage key="InvalidityBenefitAmountObjectives.description" resourceBundle="curam.asc.rules.IncapacityBenefit"/>
      </derivation>
    </Attribute>


    <Attribute name="incapacityBenefitObjectiveType">
      <type>
        <ruleclass name="IncapacityBenefitObjectiveType"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitObjectiveType">
          <specify attribute="objectiveTypeID">
            <String value="IBAmount"/>
          </specify>
          <specify attribute="comments">
            <XmlMessage>Invalidity Benefit Amount</XmlMessage>
          </specify>
          <specify attribute="name">
            <Code table="RulesComponentType">
              <String value="PC24000"/>
            </Code>
          </specify>
          <specify attribute="financialComponentType">
            <Code table="RulesComponentFCType">
              <String value="CT1"/>
            </Code>
          </specify>
          <specify attribute="rateTarget">
            <Code table="RulesComponentTarget">
              <String value="RC1"/>
            </Code>
          </specify>
          <specify attribute="isDeductionAllowable">
            <false/>
          </specify>
          <specify attribute="tagTypes">
            <fixedlist>
              <listof>
                <ruleclass name="IncapacityBenefitTagType"/>
              </listof>
              <members>
                <reference attribute="incapacityBenefitDailyBenefitTagType"/>
              </members>
            </fixedlist>
          </specify>
        </create>
      </derivation>
    </Attribute>


    <Attribute name="isEntitledToIncapacityBenefit">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="Boolean"/>
        </javaclass>
      </type>
      <derivation>
        <timelineoperation>
          <all>
            <fixedlist>
              <listof>
                <javaclass name="Boolean"/>
              </listof>
              <members>
                <intervalvalue>
                  <reference attribute="isEligibleTimeline">
                    <intervalvalue>
                      <reference attribute="programCalculator"/>
                    </intervalvalue>
                  </reference>
                </intervalvalue>
                <intervalvalue>
                  <reference attribute="isClaimTypeIncapacityBenefit">
                    <reference attribute="primaryMemberCPRCalculator">
                      <intervalvalue>
                        <reference attribute="programCalculator"/>
                      </intervalvalue>
                    </reference>
                  </reference>
                </intervalvalue>
              </members>
            </fixedlist>
          </all>
        </timelineoperation>
      </derivation>
    </Attribute>


    <Attribute name="incapacityBenefitObjectiveTimeline">
      <type>
        <ruleclass name="IncapacityBenefitObjectiveTimeline"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitObjectiveTimeline">
          <specify attribute="objectiveType">
            <reference attribute="incapacityBenefitObjectiveType"/>
          </specify>
          <specify attribute="isEntitledTimeline">
            <reference attribute="isEntitledToIncapacityBenefit"/>
          </specify>
          <specify attribute="relatedReferenceTimeline">
            <timelineoperation>
              <String value="IncapacityBenefitAmount"/>
            </timelineoperation>
          </specify>
          <specify attribute="targetIDTimeline">
            <timelineoperation>
              <reference attribute="participantRoleID">
                <reference attribute="caseParticipantRole"/>
              </reference>
            </timelineoperation>
          </specify>
          <specify attribute="tagTimelines">
            <fixedlist>
              <listof>
                <ruleclass name="IncapacityBenefitTagTimeline"/>
              </listof>
              <members>
                <reference attribute="incapacityBenefitDailyBenefitTagTimeline"/>
              </members>
            </fixedlist>
          </specify>
        </create>
      </derivation>
    </Attribute>


    <Attribute name="incapacityBenefitDailyBenefitTagType">
      <type>
        <ruleclass name="IncapacityBenefitTagType"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitTagType">
          <specify attribute="tagTypeID">
            <Number value="24000"/>
          </specify>
          <specify attribute="name">
            <XmlMessage>BenefitDaily</XmlMessage>
          </specify>
          <specify attribute="pattern">
            <FrequencyPattern value="000100000"/>
          </specify>
          <specify attribute="valueType">
            <Code table="RulesTagType">
              <String value="RTT3"/>
            </Code>
          </specify>
        </create>
      </derivation>
    </Attribute>


    <Attribute name="incapacityBenefitDailyBenefitTagTimeline">
      <type>
        <ruleclass name="IncapacityBenefitTagTimeline"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitTagTimeline">
          <specify attribute="tagType">
            <reference attribute="incapacityBenefitDailyBenefitTagType"/>
          </specify>
          <specify attribute="valueTimeline">
            <timelineoperation>
              <arithmetic decimalPlaces="2" operation="/" rounding="half_up">
                <intervalvalue>
                  <reference attribute="maximumAllotmentTimeline">
                    <intervalvalue>
                      <reference attribute="programCalculator"/>
                    </intervalvalue>
                  </reference>
                </intervalvalue>
                <Number value="7"/>
              </arithmetic>
            </timelineoperation>
          </specify>
        </create>
      </derivation>
    </Attribute>
  </Class>


  <Class name="SicknessBenefitAmountObjectives" xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
    <Initialization>
      <Attribute name="programCalculator">
        <type>
          <javaclass name="curam.creole.value.Timeline">
            <ruleclass name="IBProgramCalculator"/>
          </javaclass>
        </type>
      </Attribute>
      <Attribute name="caseParticipantRole">
        <type>
          <ruleclass name="CaseParticipantRole" ruleset="CaseEntitiesRuleSet"/>
        </type>
      </Attribute>
    </Initialization>


    <Attribute name="description">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <ResourceMessage key="SicknessBenefitAmountObjectives.description" resourceBundle="curam.asc.rules.IncapacityBenefit"/>
      </derivation>
    </Attribute>


    <Attribute name="sicknessBenefitObjectiveType">
      <type>
        <ruleclass name="IncapacityBenefitObjectiveType"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitObjectiveType">
          <specify attribute="objectiveTypeID">
            <String value="SBAmount"/>
          </specify>
          <specify attribute="comments">
            <XmlMessage>Sickness Benefit Amount</XmlMessage>
          </specify>
          <specify attribute="name">
            <Code table="RulesComponentType">
              <String value="PC24001"/>
            </Code>
          </specify>
          <specify attribute="financialComponentType">
            <Code table="RulesComponentFCType">
              <String value="CT1"/>
            </Code>
          </specify>
          <specify attribute="rateTarget">
            <Code table="RulesComponentTarget">
              <String value="RC1"/>
            </Code>
          </specify>
          <specify attribute="isDeductionAllowable">
            <false/>
          </specify>
          <specify attribute="tagTypes">
            <fixedlist>
              <listof>
                <ruleclass name="IncapacityBenefitTagType"/>
              </listof>
              <members>
                <reference attribute="sicknessBenefitDailyBenefitTagType"/>
              </members>
            </fixedlist>
          </specify>
        </create>
      </derivation>
    </Attribute>


    <Attribute name="isEntitledToSicknessBenefit">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="Boolean"/>
        </javaclass>
      </type>
      <derivation>
        <timelineoperation>
          <all>
            <fixedlist>
              <listof>
                <javaclass name="Boolean"/>
              </listof>
              <members>
                <intervalvalue>
                  <reference attribute="isEligibleTimeline">
                    <intervalvalue>
                      <reference attribute="programCalculator"/>
                    </intervalvalue>
                  </reference>
                </intervalvalue>
                <intervalvalue>
                  <reference attribute="isClaimTypeSicknessBenefit">
                    <reference attribute="primaryMemberCPRCalculator">
                      <intervalvalue>
                        <reference attribute="programCalculator"/>
                      </intervalvalue>
                    </reference>
                  </reference>
                </intervalvalue>
              </members>
            </fixedlist>
          </all>
        </timelineoperation>
      </derivation>
    </Attribute>


    <Attribute name="sicknessBenefitObjectiveTimeline">
      <type>
        <ruleclass name="IncapacityBenefitObjectiveTimeline"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitObjectiveTimeline">
          <specify attribute="objectiveType">
            <reference attribute="sicknessBenefitObjectiveType"/>
          </specify>
          <specify attribute="isEntitledTimeline">
            <reference attribute="isEntitledToSicknessBenefit"/>
          </specify>
          <specify attribute="relatedReferenceTimeline">
            <timelineoperation>
              <String value="SicknessBenefitAmount"/>
            </timelineoperation>
          </specify>
          <specify attribute="targetIDTimeline">
            <timelineoperation>
              <reference attribute="participantRoleID">
                <reference attribute="caseParticipantRole"/>
              </reference>
            </timelineoperation>
          </specify>
          <specify attribute="tagTimelines">
            <fixedlist>
              <listof>
                <ruleclass name="IncapacityBenefitTagTimeline"/>
              </listof>
              <members>
                <reference attribute="sicknessBenefitDailyBenefitTagTimeline"/>
              </members>
            </fixedlist>
          </specify>
        </create>
      </derivation>
    </Attribute>


    <Attribute name="sicknessBenefitDailyBenefitTagType">
      <type>
        <ruleclass name="IncapacityBenefitTagType"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitTagType">
          <specify attribute="tagTypeID">
            <Number value="43"/>
          </specify>
          <specify attribute="name">
            <XmlMessage>BenefitDaily</XmlMessage>
          </specify>
          <specify attribute="pattern">
            <FrequencyPattern value="000100000"/>
          </specify>
          <specify attribute="valueType">
            <Code table="RulesTagType">
              <String value="RTT3"/>
            </Code>
          </specify>
        </create>
      </derivation>
    </Attribute>


    <Attribute name="sicknessBenefitDailyBenefitTagTimeline">
      <type>
        <ruleclass name="IncapacityBenefitTagTimeline"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitTagTimeline">
          <specify attribute="tagType">
            <reference attribute="sicknessBenefitDailyBenefitTagType"/>
          </specify>
          <specify attribute="valueTimeline">
            <timelineoperation>
              <arithmetic decimalPlaces="2" operation="/" rounding="half_up">
                <intervalvalue>
                  <reference attribute="maximumAllotmentTimeline">
                    <intervalvalue>
                      <reference attribute="programCalculator"/>
                    </intervalvalue>
                  </reference>
                </intervalvalue>
                <Number value="7"/>
              </arithmetic>
            </timelineoperation>
          </specify>
        </create>
      </derivation>
    </Attribute>
  </Class>


  <Class extends="AbstractTagType" extendsRuleSet="ProductEligibilityEntitlementRuleSet" name="IncapacityBenefitTagType" xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
    <Attribute name="tagTypeID">
      <type>
        <javaclass name="Number"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="name">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="pattern">
      <type>
        <javaclass name="curam.util.type.FrequencyPattern"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="valueType">
      <type>
        <codetableentry table="RulesTagType"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="description">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <ResourceMessage key="IncapacityBenefitTagType.description" resourceBundle="curam.asc.rules.IncapacityBenefit"/>
      </derivation>
    </Attribute>
  </Class>


  <Class extends="AbstractTagTimeline" extendsRuleSet="ProductEligibilityEntitlementRuleSet" name="IncapacityBenefitTagTimeline" xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">


    <Attribute name="description">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <ResourceMessage key="IncapacityBenefitTagTimeline.description" resourceBundle="curam.asc.rules.IncapacityBenefit"/>
      </derivation>
    </Attribute>


    <Attribute name="tagType">
      <type>
        <ruleclass name="IncapacityBenefitTagType"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="valueTimeline">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="Object"/>
        </javaclass>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


  </Class>


  <Class extends="AbstractObjectiveType" extendsRuleSet="ProductEligibilityEntitlementRuleSet" name="IncapacityBenefitObjectiveType" xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">


    <Attribute name="description">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <ResourceMessage key="IncapacityBenefitObjectiveType.description" resourceBundle="curam.asc.rules.IncapacityBenefit"/>
      </derivation>
    </Attribute>


    <Attribute name="objectiveTypeID">
      <type>
        <javaclass name="String"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="comments">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="name">
      <type>
        <codetableentry table="RulesComponentType"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="financialComponentType">
      <type>
        <codetableentry table="RulesComponentFCType"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="rateTarget">
      <type>
        <codetableentry table="RulesComponentTarget"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="isDeductionAllowable">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="tagTypes">
      <type>
        <javaclass name="List">
          <ruleclass name="IncapacityBenefitTagType"/>
        </javaclass>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>
  </Class>


  <Class extends="AbstractObjectiveTimeline" extendsRuleSet="ProductEligibilityEntitlementRuleSet" name="IncapacityBenefitObjectiveTimeline" xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
    <Attribute name="description">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <ResourceMessage key="IncapacityBenefitObjectiveTimeline.description" resourceBundle="curam.asc.rules.IncapacityBenefit"/>
      </derivation>
    </Attribute>


    <Attribute name="objectiveType">
      <type>
        <ruleclass name="IncapacityBenefitObjectiveType"/>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="isEntitledTimeline">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="Boolean"/>
        </javaclass>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="relatedReferenceTimeline">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="String"/>
        </javaclass>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="targetIDTimeline">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="Number"/>
        </javaclass>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


    <Attribute name="tagTimelines">
      <type>
        <javaclass name="List">
          <ruleclass name="IncapacityBenefitTagTimeline"/>
        </javaclass>
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>


  </Class>


  <Class name="IncapacityBenefitObjectiveCalculator" xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
    <Initialization>


      <Attribute name="programCalculator">
        <type>
          <javaclass name="curam.creole.value.Timeline">
            <ruleclass name="IBProgramCalculator"/>
          </javaclass>
        </type>
      </Attribute>


      <Attribute name="caseParticipantRole">
        <type>
          <ruleclass name="CaseParticipantRole" ruleset="CaseEntitiesRuleSet"/>
        </type>
      </Attribute>
    </Initialization>


    <Attribute name="description">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <ResourceMessage key="IncapacityBenefitObjectiveCalculator.description" resourceBundle="curam.asc.rules.IncapacityBenefit"/>
      </derivation>
    </Attribute>


    <Attribute name="objectiveTimelines">
      <type>
        <javaclass name="List">
          <ruleclass name="AbstractObjectiveTimeline" ruleset="ProductEligibilityEntitlementRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <joinlists>
          <fixedlist>
            <listof>
              <javaclass name="List">
                <ruleclass name="AbstractObjectiveTimeline" ruleset="ProductEligibilityEntitlementRuleSet"/>
              </javaclass>
            </listof>
            <members>
              <fixedlist>
                <listof>
                  <ruleclass name="AbstractObjectiveTimeline" ruleset="ProductEligibilityEntitlementRuleSet"/>
                </listof>
                <members>
                  <reference attribute="sicknessBenefitObjectiveTimeline"/>
                </members>
              </fixedlist>
              <fixedlist>
                <listof>
                  <ruleclass name="AbstractObjectiveTimeline" ruleset="ProductEligibilityEntitlementRuleSet"/>
                </listof>
                <members>
                  <reference attribute="incapacityBenefitObjectiveTimeline"/>
                </members>
              </fixedlist>
            </members>
          </fixedlist>
        </joinlists>
      </derivation>
    </Attribute>


    <Attribute name="incapacityBenefitObjectiveTimeline">
      <type>
        <ruleclass name="IncapacityBenefitObjectiveTimeline"/>
      </type>
      <derivation>
        <reference attribute="incapacityBenefitObjectiveTimeline">
          <create ruleclass="IncapacityBenefitAmountObjectives">
            <reference attribute="programCalculator"/>
            <reference attribute="caseParticipantRole"/>
          </create>
        </reference>
      </derivation>
    </Attribute>


    <Attribute name="sicknessBenefitObjectiveTimeline">
      <type>
        <ruleclass name="IncapacityBenefitObjectiveTimeline"/>
      </type>
      <derivation>
        <reference attribute="sicknessBenefitObjectiveTimeline">
          <create ruleclass="SicknessBenefitAmountObjectives">
            <reference attribute="programCalculator"/>
            <reference attribute="caseParticipantRole"/>
          </create>
        </reference>
      </derivation>
    </Attribute>
  </Class>


  <Class extends="DefaultProduct" extendsRuleSet="DefaultProductEligibilityEntitlementRuleSet" name="IncapacityBenefitProduct" xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">


    <Attribute name="description">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <ResourceMessage key="IncapacityBenefitProduct.description" resourceBundle="curam.asc.rules.IncapacityBenefit"/>
      </derivation>
    </Attribute>


    <Attribute name="objectiveTypes">
      <type>
        <javaclass name="List">
          <ruleclass name="AbstractObjectiveType" ruleset="ProductEligibilityEntitlementRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <joinlists>
          <fixedlist>
            <listof>
              <javaclass name="List">
                <ruleclass name="AbstractObjectiveType" ruleset="ProductEligibilityEntitlementRuleSet"/>
              </javaclass>
            </listof>
            <members>
              <fixedlist>
                <listof>
                  <ruleclass name="AbstractObjectiveType" ruleset="ProductEligibilityEntitlementRuleSet"/>
                </listof>
                <members>
                  <reference attribute="incapacityBenefitObjectiveType"/>
                </members>
              </fixedlist>
              <fixedlist>
                <listof>
                  <ruleclass name="AbstractObjectiveType" ruleset="ProductEligibilityEntitlementRuleSet"/>
                </listof>
                <members>
                  <reference attribute="sicknessBenefitObjectiveType"/>
                </members>
              </fixedlist>
            </members>
          </fixedlist>
        </joinlists>
      </derivation>
    </Attribute>


    <Attribute name="incapacityBenefitObjectiveType">
      <type>
        <ruleclass name="IncapacityBenefitObjectiveType"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitObjectiveType">
          <specify attribute="objectiveTypeID">
            <String value="IBAmount"/>
          </specify>
          <specify attribute="comments">
            <XmlMessage>Invalidity Benefit Amount</XmlMessage>
          </specify>
          <specify attribute="name">
            <Code table="RulesComponentType">
              <String value="PC24000"/>
            </Code>
          </specify>
          <specify attribute="financialComponentType">
            <Code table="RulesComponentFCType">
              <String value="CT1"/>
            </Code>
          </specify>
          <specify attribute="rateTarget">
            <Code table="RulesComponentTarget">
              <String value="RC1"/>
            </Code>
          </specify>
          <specify attribute="isDeductionAllowable">
            <false/>
          </specify>
          <specify attribute="tagTypes">
            <fixedlist>
              <listof>
                <ruleclass name="IncapacityBenefitTagType"/>
              </listof>
              <members>
                <reference attribute="incapacityBenefitDailyBenefitTagType"/>
              </members>
            </fixedlist>
          </specify>
        </create>
      </derivation>
    </Attribute>


    <Attribute name="incapacityBenefitDailyBenefitTagType">
      <type>
        <ruleclass name="IncapacityBenefitTagType"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitTagType">
          <specify attribute="tagTypeID">
            <Number value="43"/>
          </specify>
          <specify attribute="name">
            <XmlMessage>BenefitDaily</XmlMessage>
          </specify>
          <specify attribute="pattern">
            <FrequencyPattern value="000100000"/>
          </specify>
          <specify attribute="valueType">
            <Code table="RulesTagType">
              <String value="RTT3"/>
            </Code>
          </specify>
        </create>
      </derivation>
    </Attribute>


    <!-- Sickness Benefit -->
    <Attribute name="sicknessBenefitObjectiveType">
      <type>
        <ruleclass name="IncapacityBenefitObjectiveType"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitObjectiveType">
          <specify attribute="objectiveTypeID">
            <String value="SBAmount"/>
          </specify>
          <specify attribute="comments">
            <XmlMessage>Sickness Benefit Amount</XmlMessage>
          </specify>
          <specify attribute="name">
            <Code table="RulesComponentType">
              <String value="PC24001"/>
            </Code>
          </specify>
          <specify attribute="financialComponentType">
            <Code table="RulesComponentFCType">
              <String value="CT1"/>
            </Code>
          </specify>
          <specify attribute="rateTarget">
            <Code table="RulesComponentTarget">
              <String value="RC1"/>
            </Code>
          </specify>
          <specify attribute="isDeductionAllowable">
            <false/>
          </specify>
          <specify attribute="tagTypes">
            <fixedlist>
              <listof>
                <ruleclass name="IncapacityBenefitTagType"/>
              </listof>
              <members>
                <reference attribute="sicknessBenefitDailyBenefitTagType"/>
              </members>
            </fixedlist>
          </specify>
        </create>
      </derivation>
    </Attribute>


    <Attribute name="sicknessBenefitDailyBenefitTagType">
      <type>
        <ruleclass name="IncapacityBenefitTagType"/>
      </type>
      <derivation>
        <create ruleclass="IncapacityBenefitTagType">
          <specify attribute="tagTypeID">
            <Number value="24001"/>
          </specify>
          <specify attribute="name">
            <XmlMessage>BenefitDaily</XmlMessage>
          </specify>
          <specify attribute="pattern">
            <FrequencyPattern value="000100000"/>
          </specify>
          <specify attribute="valueType">
            <Code table="RulesTagType">
              <String value="RTT3"/>
            </Code>
          </specify>
        </create>
      </derivation>
    </Attribute>
  </Class>


  <Class name="IBProgramCalculator" xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
    <Initialization>
      <Attribute name="caseID">
        <type>
          <javaclass name="Number"/>
        </type>
      </Attribute>
    </Initialization>


    <Attribute name="description">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <ResourceMessage key="ProgramCalculator.description" resourceBundle="curam.asc.rules.IncapacityBenefit">
          <reference attribute="caseID"/>
        </ResourceMessage>
      </derivation>
    </Attribute>


    <Attribute name="allCaseParticipantRoleRecords">
      <type>
        <javaclass name="List">
          <ruleclass name="CaseParticipantRole" ruleset="CaseEntitiesRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <readall ruleclass="CaseParticipantRole" ruleset="CaseEntitiesRuleSet">
          <match retrievedattribute="caseID">
            <reference attribute="caseID"/>
          </match>
        </readall>
      </derivation>
    </Attribute>


    <Attribute name="primaryCaseParticipantRole">
      <type>
        <ruleclass name="CaseParticipantRole" ruleset="CaseEntitiesRuleSet"/>
      </type>
      <derivation>
        <singleitem onEmpty="returnNull" onMultiple="returnFirst">
          <filter>
            <list>
              <reference attribute="allCaseParticipantRoleRecords"/>
            </list>
            <listitemexpression>
              <equals>
                <reference attribute="typeCode">
                  <current/>
                </reference>
                <Code table="CaseParticipantRoleType">
                  <String value="PRI"/>
                </Code>
              </equals>
            </listitemexpression>
          </filter>
        </singleitem>
      </derivation>
    </Attribute>


    <Attribute name="primaryMemberCPRCalculator">
      <type>
        <ruleclass name="MemberCPRCalculator" ruleset="ASCProductRuleSet"/>
      </type>
      <derivation>
        <create ruleclass="MemberCPRCalculator" ruleset="ASCProductRuleSet">
          <reference attribute="primaryCaseParticipantRole"/>
        </create>
      </derivation>
    </Attribute>


    <Attribute name="isEligibleTimeline">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="Boolean"/>
        </javaclass>
      </type>
      <derivation>
        <timelineoperation>
          <any>
            <fixedlist>
              <listof>
                <javaclass name="Boolean"/>
              </listof>
              <members>
                <intervalvalue>
                  <reference attribute="isEligibleForSicknessBenefit"/>
                </intervalvalue>
                <intervalvalue>
                  <reference attribute="isEligibleForInvalidityBenefit"/>
                </intervalvalue>
              </members>
            </fixedlist>
          </any>
        </timelineoperation>
      </derivation>
    </Attribute>


    <Attribute name="isEligibleForSicknessBenefit">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="Boolean"/>
        </javaclass>
      </type>
      <derivation>
        <timelineoperation>
          <all>
            <fixedlist>
              <listof>
                <javaclass name="Boolean"/>
              </listof>
              <members>
                <intervalvalue>
                  <reference attribute="passesIncapacityBenefityCommonRules"/>
                </intervalvalue>
                <intervalvalue>
                  <reference attribute="isSicknessBenefitType">
                    <reference attribute="primaryMemberCPRCalculator"/>
                  </reference>
                </intervalvalue>
                <intervalvalue>
                  <reference attribute="sicknessBenefitDurationTimeline">
                    <reference attribute="primaryMemberCPRCalculator"/>
                  </reference>
                </intervalvalue>


              </members>
            </fixedlist>
          </all>
        </timelineoperation>
      </derivation>
    </Attribute>


    <Attribute name="isEligibleForInvalidityBenefit">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="Boolean"/>
        </javaclass>
      </type>
      <derivation>
        <timelineoperation>
          <all>
            <fixedlist>
              <listof>
                <javaclass name="Boolean"/>
              </listof>
              <members>
                <intervalvalue>
                  <reference attribute="passesIncapacityBenefityCommonRules"/>
                </intervalvalue>
                <any>
                  <fixedlist>
                    <listof>
                      <javaclass name="Boolean"/>
                    </listof>
                    <members>
                      <intervalvalue>
                        <reference attribute="isInvalidityBenefitType">
                          <reference attribute="primaryMemberCPRCalculator"/>
                        </reference>
                      </intervalvalue>
                      <intervalvalue>
                        <reference attribute="invalidityBenefitDurationTimeline">
                          <reference attribute="primaryMemberCPRCalculator"/>
                        </reference>
                      </intervalvalue>
                    </members>
                  </fixedlist>
                </any>
              </members>
            </fixedlist>
          </all>
        </timelineoperation>
      </derivation>
    </Attribute>


    <Attribute name="passesIncapacityBenefityCommonRules">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="Boolean"/>
        </javaclass>
      </type>
      <derivation>
        <timelineoperation>
          <all>
            <fixedlist>
              <listof>
                <javaclass name="Boolean"/>
              </listof>
              <members>
                <intervalvalue>
                  <reference attribute="isInAgeRangeIncapacityBenefit">
                    <reference attribute="primaryMemberCPRCalculator"/>
                  </reference>
                </intervalvalue>
                <intervalvalue>
                  <reference attribute="isPractitionerCertified">
                    <reference attribute="primaryMemberCPRCalculator"/>
                  </reference>
                </intervalvalue>
              </members>
            </fixedlist>
          </all>
        </timelineoperation>
      </derivation>
    </Attribute>


    <!--
       The benefitType derived from the eligible timelines. In effect, we're reverse
       engineering here to get the benefitType timeline (Sickness Benefit or Invalidity
       Benefit)
     -->
    <Attribute name="benefitType">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <codetableentry table="IBClaimType"/>
        </javaclass>
      </type>
      <derivation>
        <timelineoperation>
          <choose>
            <type>
              <codetableentry table="IBClaimType"/>
            </type>
            <when>
              <condition>
                <intervalvalue>
                  <reference attribute="isEligibleForSicknessBenefit"/>
                </intervalvalue>
              </condition>
              <value>
                <Code table="IBClaimType">
                  <String value="IBPT24000"/>
                </Code>
              </value>
            </when>


            <when>
              <condition>
                <intervalvalue>
                  <reference attribute="isEligibleForInvalidityBenefit"/>
                </intervalvalue>
              </condition>
              <value>
                <Code table="IBClaimType">
                  <String value="IBPT24001"/>
                </Code>
              </value>
            </when>


            <otherwise>
              <value>
                <Code table="IBClaimType">
                  <String value="IBPT24001"/>
                </Code>
              </value>
            </otherwise>
          </choose>
        </timelineoperation>
      </derivation>
    </Attribute>


    <!--
       Decision table for deciding which rate is being paid depending
       on the benefitType derived above.
     -->
    <Attribute name="maximumAllotmentTimeline">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="Number"/>
        </javaclass>
      </type>
      <derivation>
        <timelineoperation>
          <choose>
            <type>
              <javaclass name="Number"/>
            </type>
            <test>
              <intervalvalue>
                <reference attribute="benefitType"/>
              </intervalvalue>
            </test>
            <when>
              <condition>
                <Code table="IBClaimType">
                  <String value="IBPT24000"/>
                </Code>
              </condition>
              <value>
                <intervalvalue>
                  <rate column="RC24000" row="SBROWRATE" table="RTT24001"/>
                </intervalvalue>
              </value>
            </when>
            <when>
              <condition>
                <Code table="IBClaimType">
                  <String value="IBPT24001"/>
                </Code>
              </condition>
              <value>
                <intervalvalue>
                  <rate column="RC24000" row="IBROWRATE" table="RTT24000"/>
                </intervalvalue>
              </value>
            </when>
            <otherwise>
              <value>
                <intervalvalue>
                  <rate column="RC24000" row="IBROWRATE" table="RTT24000"/>
                </intervalvalue>
              </value>
            </otherwise>
          </choose>
        </timelineoperation>
      </derivation>
    </Attribute>


  </Class>


  <Class extends="DefaultCase" extendsRuleSet="DefaultProductEligibilityEntitlementRuleSet" name="IncapacityBenefitProductCase" xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
    <Attribute name="description">
      <type>
        <javaclass name="curam.creole.value.Message"/>
      </type>
      <derivation>
        <ResourceMessage key="IncapacityBenefitProductCase.description" resourceBundle="curam.asc.rules.IncapacityBenefit"/>
      </derivation>
    </Attribute>


    <Attribute name="caseID">
      <type>
        <javaclass name="Number"/>
      </type>
      <derivation>
        <reference attribute="caseID">
          <reference attribute="productDeliveryCase"/>
        </reference>
      </derivation>
    </Attribute>


    <Attribute name="parentIntegratedCaseID">
      <type>
        <javaclass name="Number"/>
      </type>
      <derivation>
        <choose>
          <type>
            <javaclass name="Number"/>
          </type>
          <when>
            <condition>
              <reference attribute="isProductDelivery"/>
            </condition>
            <value>
              <reference attribute="integratedCaseID">
                <reference attribute="caseHeaderRecord"/>
              </reference>
            </value>
          </when>
          <otherwise>
            <value>
              <reference attribute="caseID"/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>


    <Attribute name="caseHeaderRecord">
      <type>
        <ruleclass name="CaseHeader" ruleset="CaseEntitiesRuleSet"/>
      </type>
      <derivation>
        <singleitem onEmpty="error" onMultiple="error">
          <readall ruleclass="CaseHeader" ruleset="CaseEntitiesRuleSet">
            <match retrievedattribute="caseID">
              <reference attribute="caseID"/>
            </match>
          </readall>
        </singleitem>
      </derivation>
    </Attribute>


    <Attribute name="isProductDelivery">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
        <equals>
          <reference attribute="caseTypeCode">
            <reference attribute="caseHeaderRecord"/>
          </reference>
          <Code table="CaseTypeCode">
            <String value="CT2"/>
          </Code>
        </equals>
      </derivation>
    </Attribute>


    <Attribute name="programCalculator">
      <type>
        <ruleclass name="IBProgramCalculator"/>
      </type>
      <derivation>
        <create ruleclass="IBProgramCalculator">
          <reference attribute="parentIntegratedCaseID"/>
        </create>
      </derivation>
    </Attribute>


    <Attribute name="isEligibleTimeline">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <javaclass name="Boolean"/>
        </javaclass>
      </type>
      <derivation>
        <reference attribute="isEligibleTimeline">
          <reference attribute="programCalculator"/>
        </reference>
      </derivation>
    </Attribute>


    <Attribute name="objectiveTimelines">
      <type>
        <javaclass name="List">
          <ruleclass name="AbstractObjectiveTimeline" ruleset="ProductEligibilityEntitlementRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <reference attribute="objectiveTimelines">
          <create ruleclass="IncapacityBenefitObjectiveCalculator">
            <reference attribute="ibProgramCalculatorTimeline"/>
            <reference attribute="caseParticipantRole"/>
          </create>
        </reference>
      </derivation>
    </Attribute>


    <Attribute name="ibProgramCalculatorTimeline">
      <type>
        <javaclass name="curam.creole.value.Timeline">
          <ruleclass name="IBProgramCalculator"/>
        </javaclass>
      </type>
      <derivation>
        <timelineoperation>
          <reference attribute="programCalculator"/>
        </timelineoperation>
      </derivation>
    </Attribute>


    <Attribute name="allCaseParticipantRoleRecords">
      <type>
        <javaclass name="List">
          <ruleclass name="CaseParticipantRole" ruleset="CaseEntitiesRuleSet"/>
        </javaclass>
      </type>
      <derivation>
        <readall ruleclass="CaseParticipantRole" ruleset="CaseEntitiesRuleSet">
          <match retrievedattribute="caseID">
            <reference attribute="parentIntegratedCaseID"/>
          </match>
        </readall>
      </derivation>
    </Attribute>


    <Attribute name="caseParticipantRole">
      <type>
        <ruleclass name="CaseParticipantRole" ruleset="CaseEntitiesRuleSet"/>
      </type>
      <derivation>
        <singleitem onEmpty="returnNull" onMultiple="returnFirst">
          <filter>
            <list>
              <reference attribute="allCaseParticipantRoleRecords"/>
            </list>
            <listitemexpression>
              <equals>
                <reference attribute="typeCode">
                  <current/>
                </reference>
                <Code table="CaseParticipantRoleType">
                  <String value="PRI"/>
                </Code>
              </equals>
            </listitemexpression>
          </filter>
        </singleitem>
      </derivation>
    </Attribute>


  </Class>


</RuleSet>